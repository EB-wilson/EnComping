## 结构

**结构（Struct）** 是一种包含了若干个字段的数据容器，在ECP中的结构只能用作字面解析类型用于存储和传递数据，不可记名。

结构类型的声明格式如下：

```ecs
{[val] a: Type1, [val] b: Type2, ... [val] n: TypeN}
```

结构成员前的`val`可以缺省，若缺省变量可变性则认为是`var`。

创建构造的格式如下：

```ecs
{[val] a[: Type1] = value1, [val] b[: Type2] = value2, ... [val] n[: TypeN] = valueN}
```

与结构的类型声明相同，结构中的变量可变性也是可缺省的，不同的是当分配的类型是确定的时，创建构造省略的可变性声明会来自分配的类型，但是注意，变量可变性也是变量类型的一部分，不一致的变量可变性将使得结构无法分配给此类型。

如下所示：

```ecs
let a: {a: Int, val b: Int} = {a = 1, val b = 2}
let b: {a: Int, val b: Int, val c: String} = {a = 1, b = 2, c = "abc"}
let c = {a = 1, b = 2, val c = "hello"}
```

变量类型缺省可根据字面量推断类型，而当类型给定，创建结构的语句中许多细节即可省略以自动推断。

### 访问结构变量

对一个结构可以像对普通对象访问成员一样，使用`.`操作符访问其成员变量：

```ecs
let a = {x = 1, y = 2}
a.x = 3
a.y = 4

println(a.x + a.y) // 7
println(a) // {x = 3, y = 4}
```

结构是静态分析的，与元组类似，结构也不可使用`[key]`或者`get(key)`等方式动态获取变量的值。

### 结构传递

当一个结构中包含的所有**可变量**在另一个结构中都存在时，可使用那个结构为此结构直接赋值，其数据会直接传递给这个结构：

```ecs
val a = {x = 1, y = 2, val n = 20}
val b = {w = 10, x = 3, val y = 4, z = 5}

a = b
println(a) // {x = 3, y = 4, n = 20}
```

## 单例

**单例（Singleton）** 表示的是一个持名的形如类型的**对象**，由`singleton`关键字进行声明，格式如下：

```ecs
[modifiers] singleton <SingletonName>[: Components][{body}]
```

单例本身既是类型又是对象，在单例中声明的可见成员可以直接对单例使用**点表达式**进行访问。

```ecp
singleton Mathf{
  const val PI = 3.1415926f
  const val HALF_PI = PI/2

  fun sin(deg: Float): Float{...}

  fun cos(deg: Float): Float{...}

  fun tan(deg: Float): Float{...}

  ...
}
```

您可以直接使用它的名称标记来访问它当中定义的内容：

```ecs
println(Mathf.PI)
peintln(Mathf.sin(60))
```

单例代码块有一种特殊的形式，即附着在组件或组合中时，它可以省略其名称标识，并使用它附着的类型作为名称，这看起来是这样的：

```ecp
comp Entity{
  singleton {
    fun kill(ent: Entity){...}
  }

  ...
}
```

当需要访问它时，直接对Entity类型访问其函数即可：

```ecs
Entity.kill(ent)
```

单例的附着还有一种形式，当单例所在的包中存在同名的组件或组合类型时，它也可以附着到那个同名的类型上，但是一个类型有且只能有一个单例附着，多个附着是非法的。

同名附着单例看起来是这样的：

```ecs
package example

comp Entity{
  ...
}

singleton Entity{
  fun kill(ent: Entity){...}
}
```

只要其包路径与名称均相同，那么这个单例就可以附着到那个同名的类型上，上述这段代码和前一个的效果是完全一致的。


